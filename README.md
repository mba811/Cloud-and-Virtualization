云计算与虚拟化学习
---

介绍下主流“云”的现状，会引用许多现成（尽量）客观的信息片段；畅想一下；从中选择部分组成一个完整系统，进行搭建（或模拟）并本地调优（避免过早优化）；避免烂尾，结尾送两首短诗吧。

##  根据需求来架构

所有我们所需要的东西，至此有了一个整体的印象。接下来，我列举几个关键词，从中挑出一部分来组建我们“云”。

  * 存储：将要构建的基础设施的基础，所以一定要对其可用性及速度有所保证。
  * 虚拟化：通过软件模拟芯片以及处理器的运行结构，作为八九十年代生人（忽然觉得时间好快），多数人最熟悉的应该是红白机模拟器了吧。
  * 集群：这个概念里有并行还有分布，两者比较明显的区别是是否在某一时间段内有共同的计算目的。
  * 授权服务：现代数据中心的多数应用，都需要统一的用户数据，如何安全地使用统一的用户数据，也是我们需要考虑的。
  * 安全与可信：安全的问题，**很重要**。不要等到哪天信用卡账户被盗刷才发现安全的重要性；可信，即是服务提供者与接受者具有可信的第三方提供支持。
  * 可扩展：这里有两个层面，一个基础设施自身计算与存储能力扩增，另一个是与其他云计算平台的模块级别兼容。
  * 外围设备：对于特殊的应用（环境监视、认证、GPU依赖应用等），我们需要一些外围设备来辅助完成（usb设备、显卡等）。对于重要设备或者非常依赖总线带宽的设备（令牌、显卡等）的安装，推荐将其与实施应用的物理机直接绑定，对于其他设备（U盘、摄像头等）推荐使用某一既定物理机进行基于TCP/IP的透传。
  * 电源管理：由于集群中存在中央管理，所以有必要使用栅栏（fencing）去关闭与管理失去联系的机器，防止其自建中央管理。
  * orchestration：即预配置，不管是虚拟机还是应用程序，我们的目的之一就是达到服务的快速响应。

如此划分的意图是什么呢？**基础设施，在保证安全可靠的前提下，对本地资源实现最大化利用，也是我们追求的指标之一。还要注意，确保虚拟机状态监控无有遗漏，宿主机部署保证安全，否则，后期很痛苦，因为你永远无法控制用户使用你的环境做什么。**

接下来，看看即将部署的各个层之间的关系：

![../_images/01-02.png](http://inthecloud.readthedocs.org/zh_CN/draft/_images/01-02.png)

如你所见，存储与计算是在同一节点上，所有管理服务以虚拟机形态运行，统统高可用。但是，这个架构一定存在一个弊端吧？没错，从整体服务的角度来看，虚拟机作主体的架构中存在一定程度的管理上的不便。传统集群只要关心物理设施及与其绑定的应用即可，它们在某个区的几号柜的那一层；而虚拟机们则可能有些“任性”，没有绑定的情况下会在集群中的某台宿主机中进行迁移。所以，我们需要一个完备的集群管理及报告系统，也会需要一个DataWare House来统计用户行为。